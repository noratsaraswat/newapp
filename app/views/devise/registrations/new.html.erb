<h2>Sign up</h2>
<%#= resource.with_role %>
<% resource.with_role if resource.role.nil? %>
<%= form_for  resource_name, resource.with_role, :url => registration_path(resource_name) do |f| %>
<%#= form_for(resource, :as => resource_name, :url => registration_path(resource_name)) do |f| %>
  <%= devise_error_messages! %>

  <p><%= f.label :email %><br />
  <%= f.email_field :email %></p>

  <p><%= f.label :password %><br />
  <%= f.password_field :password %></p>

  <p><%= f.label :password_confirmation %><br />
  <%= f.password_field :password_confirmation %></p>

  <p> <%= f.label :name %><br />
  <%= f.text_field :name %> </p>
  <%# @role = resource.build_role if resource.role.nil? %>
  <%= f.fields_for :role do |role_form| %>
      <%= role_form.label "Role" %><br />
     
    <%= role_form.select(:name,[ ['Please select an option', nil],[ "Teacher", "teacher"],["Student", "student"] ] )%>
   <% end %>

   <p><%= f.submit "Sign up" %></p>
<% end %>
<%= render :partial => "devise/shared/links" %>
